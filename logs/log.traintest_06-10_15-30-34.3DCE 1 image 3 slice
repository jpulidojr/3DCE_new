+ echo Logging output to '/home/pulido/CADLab/lesion_detector_3DCE/3DCE_new/./log.traintest_06-10_15-30-34.3DCE 1 image 3 slice'
Logging output to /home/pulido/CADLab/lesion_detector_3DCE/3DCE_new/./log.traintest_06-10_15-30-34.3DCE 1 image 3 slice
+ python /home/pulido/CADLab/lesion_detector_3DCE/3DCE_new/./rcnn/tools/train.py
/home/pulido/CADLab/lesion_detector_3DCE/3DCE_new/rcnn/tools/../../rcnn/config.py:176: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.
  yaml_cfg = edict(yaml.load(f))
INFO:root:{'ANCHOR_RATIOS': [0.5, 1, 2],
 'ANCHOR_SCALES': [2, 3, 4, 6, 12],
 'CLASS_NAMES': ['bg', 'lesion'],
 'FIXED_PARAMS': [],
 'FIXED_PARAMS_SHARED': ['conv1', 'conv2', 'conv3', 'conv4', 'conv5'],
 'FRAMEWORK': '3DCE',
 'GT_MARGIN': 0,
 'IMAGE_STRIDE': 0,
 'IMG_DO_CLIP': True,
 'MAX_SIZE': 512,
 'NORM_SPACING': 0.8,
 'NUM_ANCHORS': 15,
 'NUM_CLASSES': 2,
 'NUM_IMAGES_3DCE': 1,
 'NUM_SLICES': 3,
 'PIXEL_MEANS': array([50]),
 'RCNN_FEAT_STRIDE': 8,
 'RPN_FEAT_STRIDE': 8,
 'SCALE': 512,
 'SLICE_INTV': 2,
 'TEST': {'CXX_PROPOSAL': False,
          'HAS_RPN': False,
          'NMS': 0.3,
          'PROPOSAL_MIN_SIZE': 8,
          'PROPOSAL_NMS_THRESH': 0.7,
          'PROPOSAL_POST_NMS_TOP_N': 2000,
          'PROPOSAL_PRE_NMS_TOP_N': 20000,
          'RPN_MIN_SIZE': 8,
          'RPN_NMS_THRESH': 0.7,
          'RPN_POST_NMS_TOP_N': 300,
          'RPN_PRE_NMS_TOP_N': 6000,
          'SAMPLES_PER_BATCH': 1},
 'TRAIN': {'ASPECT_GROUPING': False,
           'BATCH_ROIS': 32,
           'BBOX_MEANS': [0.0, 0.0, 0.0, 0.0],
           'BBOX_NORMALIZATION_PRECOMPUTED': True,
           'BBOX_NORMALIZE_TARGETS': False,
           'BBOX_REGRESSION_THRESH': 0.5,
           'BBOX_STDS': [0.1, 0.1, 0.2, 0.2],
           'BBOX_WEIGHTS': array([1., 1., 1., 1.]),
           'BG_THRESH_HI': 0.5,
           'BG_THRESH_LO': 0.0,
           'CXX_PROPOSAL': False,
           'END2END': True,
           'FG_FRACTION': 0.25,
           'FG_THRESH': 0.5,
           'RCNN_POS_UPSAMPLE': False,
           'RCNN_REG_LOSS_WEIGHT': 10,
           'RPN_BATCH_SIZE': 32,
           'RPN_BBOX_WEIGHTS': [1.0, 1.0, 1.0, 1.0],
           'RPN_CLOBBER_POSITIVES': False,
           'RPN_FG_FRACTION': 0.5,
           'RPN_MIN_SIZE': 8,
           'RPN_NEGATIVE_OVERLAP': 0.3,
           'RPN_NMS_THRESH': 0.7,
           'RPN_POSITIVE_OVERLAP': 0.7,
           'RPN_POSITIVE_WEIGHT': -1.0,
           'RPN_POST_NMS_TOP_N': 2000,
           'RPN_PRE_NMS_TOP_N': 12000,
           'RPN_REG_LOSS_WEIGHT': 1,
           'SAMPLES_PER_BATCH': 1},
 'WINDOWING': [-1024, 3071]}
INFO:root:{'accs': {},
 'base_lr': 0.001,
 'begin_epoch': 0,
 'dataset': 'DeepLesion',
 'dataset_path': '/home/pulido/CADLab/lesion_detector_3DCE/images/',
 'e2e_epoch': 30,
 'e2e_lr': 0.001,
 'e2e_lr_step': '4,5',
 'e2e_prefix': 'model/3DCE 1 image 3 slice',
 'exp_name': '3DCE 1 image 3 slice',
 'flip': False,
 'frequent': 100,
 'gpus': '1',
 'groundtruth_file': '/home/pulido/CADLab/lesion_detector_3DCE/3DCE_new/data/DeepLesion/DL_info.csv',
 'image_path': '/home/pulido/CADLab/lesion_detector_3DCE/images/Images_png/',
 'image_set': 'train',
 'iter_size': 1,
 'keep_best_model': True,
 'kvstore': 'device',
 'lr_factor': 0.1,
 'network': 'vgg',
 'prefetch_thread_num': 4,
 'pretrained': '/home/pulido/CADLab/lesion_detector_3DCE/vgg16',
 'pretrained_epoch': 0,
 'proposal': 'rpn',
 'rand_seed': 23,
 'resume': False,
 'root_path': '/home/pulido/CADLab/lesion_detector_3DCE/3DCE_new/data',
 'show_avg_loss': 100,
 'shuffle': True,
 'test_image_set': 'test',
 'testing': False,
 'use_roidb_cache': True,
 'val_avg_fp': [0.5, 1, 2, 4, 8, 16],
 'val_gpu': '1',
 'val_has_rpn': True,
 'val_image_set': 'val',
 'val_iou_th': 0.5,
 'val_max_box': 5,
 'val_shuffle': False,
 'val_thresh': 0,
 'val_vis': False,
 'validate_at_begin': False,
 'weight_decay': 0.0005,
 'work_load_list': None}
INFO:root:DeepLesion_train num_images 22496
INFO:root:DeepLesion_train gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_train_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 22496 -> 22478, bboxes: 22919 -> 22901
INFO:root:sample boxes filtered, images: 22478 -> 3411, bboxes: 22901 -> 22901
INFO:root:Sampling 15 pcnt : 3411 training slices
INFO:root:Loading images with 4 threads.
INFO:root:providing maximum shape [('data', (1, 3, 512, 512)), ('gt_boxes', (1, 5, 5))] [('label', (1, 61440)), ('bbox_target', (1, 60, 64, 64)), ('bbox_weight', (1, 60, 64, 64))]
INFO:root:output shape {'bbox_loss_reshape_output': (1, 32, 8),
 'blockgrad0_output': (1, 32),
 'cls_prob_reshape_output': (1, 32, 2),
 'rpn_bbox_loss_output': (1, 60, 41, 42),
 'rpn_cls_prob_output': (1, 2, 615, 42)}
INFO:root:loading parameters from /home/pulido/CADLab/lesion_detector_3DCE/vgg16-0000.params
INFO:root:load param done
INFO:root:lr 0.001000 lr_epoch_diff [4.0, 5.0] lr_iters [13644, 17055]
('rescale_grad ', '3411', ' ', '1')
INFO:root:Epoch 0 Batch 0	13981013.3 smp/sec	RPNLogLoss=0.644,	RPNL1Loss=0.00914,	RCNNLogLoss=0.694,	RCNNL1Loss=3.72e-08,	
INFO:root:Epoch 0 Batch 100	5.8 smp/sec	RPNLogLoss=0.28,	RPNL1Loss=0.0302,	RCNNLogLoss=0.42,	RCNNL1Loss=0.0431,	
INFO:root:Epoch 0 Batch 200	5.9 smp/sec	RPNLogLoss=0.22,	RPNL1Loss=0.0317,	RCNNLogLoss=0.367,	RCNNL1Loss=0.066,	
INFO:root:Epoch 0 Batch 300	5.9 smp/sec	RPNLogLoss=0.187,	RPNL1Loss=0.027,	RCNNLogLoss=0.368,	RCNNL1Loss=0.0662,	
INFO:root:Epoch 0 Batch 400	5.9 smp/sec	RPNLogLoss=0.159,	RPNL1Loss=0.0248,	RCNNLogLoss=0.404,	RCNNL1Loss=0.0891,	
INFO:root:Epoch 0 Batch 500	6.1 smp/sec	RPNLogLoss=0.154,	RPNL1Loss=0.0191,	RCNNLogLoss=0.427,	RCNNL1Loss=0.104,	
INFO:root:Epoch 0 Batch 600	5.9 smp/sec	RPNLogLoss=0.143,	RPNL1Loss=0.0154,	RCNNLogLoss=0.411,	RCNNL1Loss=0.0827,	
INFO:root:Epoch 0 Batch 700	6.0 smp/sec	RPNLogLoss=0.142,	RPNL1Loss=0.0184,	RCNNLogLoss=0.452,	RCNNL1Loss=0.105,	
INFO:root:Epoch 0 Batch 800	6.0 smp/sec	RPNLogLoss=0.136,	RPNL1Loss=0.0205,	RCNNLogLoss=0.434,	RCNNL1Loss=0.109,	
INFO:root:Epoch 0 Batch 900	6.1 smp/sec	RPNLogLoss=0.146,	RPNL1Loss=0.0194,	RCNNLogLoss=0.444,	RCNNL1Loss=0.123,	
INFO:root:Epoch 0 Batch 1000	6.0 smp/sec	RPNLogLoss=0.18,	RPNL1Loss=0.0392,	RCNNLogLoss=0.405,	RCNNL1Loss=0.105,	
INFO:root:Epoch 0 Batch 1100	6.3 smp/sec	RPNLogLoss=0.149,	RPNL1Loss=0.0145,	RCNNLogLoss=0.412,	RCNNL1Loss=0.0933,	
INFO:root:Epoch 0 Batch 1200	5.9 smp/sec	RPNLogLoss=0.12,	RPNL1Loss=0.02,	RCNNLogLoss=0.389,	RCNNL1Loss=0.118,	
INFO:root:Epoch 0 Batch 1300	6.0 smp/sec	RPNLogLoss=0.127,	RPNL1Loss=0.0182,	RCNNLogLoss=0.407,	RCNNL1Loss=0.101,	
INFO:root:Epoch 0 Batch 1400	5.9 smp/sec	RPNLogLoss=0.0995,	RPNL1Loss=0.0181,	RCNNLogLoss=0.365,	RCNNL1Loss=0.121,	
INFO:root:Epoch 0 Batch 1500	6.0 smp/sec	RPNLogLoss=0.137,	RPNL1Loss=0.0226,	RCNNLogLoss=0.406,	RCNNL1Loss=0.112,	
INFO:root:Epoch 0 Batch 1600	6.1 smp/sec	RPNLogLoss=0.159,	RPNL1Loss=0.0383,	RCNNLogLoss=0.399,	RCNNL1Loss=0.118,	
INFO:root:Epoch 0 Batch 1700	6.1 smp/sec	RPNLogLoss=0.129,	RPNL1Loss=0.0144,	RCNNLogLoss=0.418,	RCNNL1Loss=0.106,	
INFO:root:Epoch 0 Batch 1800	6.0 smp/sec	RPNLogLoss=0.119,	RPNL1Loss=0.0174,	RCNNLogLoss=0.386,	RCNNL1Loss=0.133,	
INFO:root:Epoch 0 Batch 1900	6.1 smp/sec	RPNLogLoss=0.148,	RPNL1Loss=0.0227,	RCNNLogLoss=0.425,	RCNNL1Loss=0.126,	
INFO:root:Epoch 0 Batch 2000	6.0 smp/sec	RPNLogLoss=0.137,	RPNL1Loss=0.0211,	RCNNLogLoss=0.395,	RCNNL1Loss=0.125,	
INFO:root:Epoch 0 Batch 2100	6.0 smp/sec	RPNLogLoss=0.114,	RPNL1Loss=0.0259,	RCNNLogLoss=0.4,	RCNNL1Loss=0.126,	
INFO:root:Epoch 0 Batch 2200	6.1 smp/sec	RPNLogLoss=0.106,	RPNL1Loss=0.0155,	RCNNLogLoss=0.396,	RCNNL1Loss=0.111,	
INFO:root:Epoch 0 Batch 2300	6.2 smp/sec	RPNLogLoss=0.111,	RPNL1Loss=0.0173,	RCNNLogLoss=0.378,	RCNNL1Loss=0.118,	
INFO:root:Epoch 0 Batch 2400	6.1 smp/sec	RPNLogLoss=0.118,	RPNL1Loss=0.0214,	RCNNLogLoss=0.383,	RCNNL1Loss=0.125,	
INFO:root:Epoch 0 Batch 2500	6.0 smp/sec	RPNLogLoss=0.112,	RPNL1Loss=0.0133,	RCNNLogLoss=0.36,	RCNNL1Loss=0.119,	
INFO:root:Epoch 0 Batch 2600	6.2 smp/sec	RPNLogLoss=0.14,	RPNL1Loss=0.0184,	RCNNLogLoss=0.347,	RCNNL1Loss=0.114,	
INFO:root:Epoch 0 Batch 2700	6.1 smp/sec	RPNLogLoss=0.12,	RPNL1Loss=0.0172,	RCNNLogLoss=0.386,	RCNNL1Loss=0.123,	
INFO:root:Epoch 0 Batch 2800	6.1 smp/sec	RPNLogLoss=0.0904,	RPNL1Loss=0.015,	RCNNLogLoss=0.337,	RCNNL1Loss=0.113,	
INFO:root:Epoch 0 Batch 2900	6.0 smp/sec	RPNLogLoss=0.113,	RPNL1Loss=0.0163,	RCNNLogLoss=0.363,	RCNNL1Loss=0.113,	
INFO:root:Epoch 0 Batch 3000	6.0 smp/sec	RPNLogLoss=0.0937,	RPNL1Loss=0.0253,	RCNNLogLoss=0.336,	RCNNL1Loss=0.107,	
INFO:root:Epoch 0 Batch 3100	6.1 smp/sec	RPNLogLoss=0.106,	RPNL1Loss=0.0239,	RCNNLogLoss=0.331,	RCNNL1Loss=0.113,	
INFO:root:Epoch 0 Batch 3200	6.2 smp/sec	RPNLogLoss=0.101,	RPNL1Loss=0.0178,	RCNNLogLoss=0.324,	RCNNL1Loss=0.102,	
INFO:root:Epoch 0 Batch 3300	6.2 smp/sec	RPNLogLoss=0.102,	RPNL1Loss=0.0135,	RCNNLogLoss=0.362,	RCNNL1Loss=0.107,	
INFO:root:Epoch 0 Batch 3400	6.3 smp/sec	RPNLogLoss=0.119,	RPNL1Loss=0.0193,	RCNNLogLoss=0.376,	RCNNL1Loss=0.112,	
INFO:root:Epoch[0] Train-RPNLogLoss=0.121013
INFO:root:Epoch[0] Train-RPNL1Loss=0.024636
INFO:root:Epoch[0] Train-RCNNLogLoss=0.363960
INFO:root:Epoch[0] Train-RCNNL1Loss=0.115192
INFO:root:Epoch[0] Time cost=563.440
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0001.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0001.params
INFO:root:im_detect: 0/4791 data 0.045s im_detect 0.175s misc 0.007s
INFO:root:im_detect: 200/4791 data 0.011s im_detect 0.089s misc 0.007s
INFO:root:im_detect: 400/4791 data 0.011s im_detect 0.089s misc 0.007s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.1493759  0.21076325 0.28667894 0.37691835 0.46122365 0.53243299]
=============================>PR<============================
precision:
[0.23356264 0.17694554 0.12756078 0.08768923 0.05554187 0.03282949]
recall:
[0.1493759  0.21076325 0.28667894 0.37691835 0.46122365 0.53243299]
f-measure:
[0.18221529 0.19237953 0.17655955 0.14227784 0.09914447 0.06184562]
=============================>PR<============================
Iter 1: 0.3769
INFO:root:Validate callback: 0.376918
INFO:root:Returned Validation=0.115192
INFO:root:Retraining data=0.115192
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 1
INFO:root:sample boxes filtered, images: 22478 -> 3378, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 1 Batch 0	0.2 smp/sec	RPNLogLoss=0.12,	RPNL1Loss=0.0246,	RCNNLogLoss=0.363,	RCNNL1Loss=0.115,	
INFO:root:Epoch 1 Batch 100	5.8 smp/sec	RPNLogLoss=0.0871,	RPNL1Loss=0.0173,	RCNNLogLoss=0.321,	RCNNL1Loss=0.111,	
INFO:root:Epoch 1 Batch 200	6.1 smp/sec	RPNLogLoss=0.112,	RPNL1Loss=0.0175,	RCNNLogLoss=0.368,	RCNNL1Loss=0.115,	
INFO:root:Epoch 1 Batch 300	6.0 smp/sec	RPNLogLoss=0.112,	RPNL1Loss=0.0142,	RCNNLogLoss=0.345,	RCNNL1Loss=0.0939,	
INFO:root:Epoch 1 Batch 400	6.1 smp/sec	RPNLogLoss=0.104,	RPNL1Loss=0.0147,	RCNNLogLoss=0.356,	RCNNL1Loss=0.119,	
INFO:root:Epoch 1 Batch 500	6.1 smp/sec	RPNLogLoss=0.11,	RPNL1Loss=0.0188,	RCNNLogLoss=0.347,	RCNNL1Loss=0.0989,	
INFO:root:Epoch 1 Batch 600	6.0 smp/sec	RPNLogLoss=0.0859,	RPNL1Loss=0.0177,	RCNNLogLoss=0.32,	RCNNL1Loss=0.109,	
INFO:root:Epoch 1 Batch 700	5.9 smp/sec	RPNLogLoss=0.071,	RPNL1Loss=0.0154,	RCNNLogLoss=0.332,	RCNNL1Loss=0.107,	
INFO:root:Epoch 1 Batch 800	5.9 smp/sec	RPNLogLoss=0.0769,	RPNL1Loss=0.0156,	RCNNLogLoss=0.355,	RCNNL1Loss=0.103,	
INFO:root:Epoch 1 Batch 900	6.1 smp/sec	RPNLogLoss=0.131,	RPNL1Loss=0.0255,	RCNNLogLoss=0.325,	RCNNL1Loss=0.0989,	
INFO:root:Epoch 1 Batch 1000	6.0 smp/sec	RPNLogLoss=0.0782,	RPNL1Loss=0.0127,	RCNNLogLoss=0.345,	RCNNL1Loss=0.0986,	
INFO:root:Epoch 1 Batch 1100	6.0 smp/sec	RPNLogLoss=0.0909,	RPNL1Loss=0.0197,	RCNNLogLoss=0.338,	RCNNL1Loss=0.0947,	
INFO:root:Epoch 1 Batch 1200	6.1 smp/sec	RPNLogLoss=0.0938,	RPNL1Loss=0.0202,	RCNNLogLoss=0.324,	RCNNL1Loss=0.105,	
INFO:root:Epoch 1 Batch 1300	6.1 smp/sec	RPNLogLoss=0.0913,	RPNL1Loss=0.0147,	RCNNLogLoss=0.321,	RCNNL1Loss=0.0956,	
INFO:root:Epoch 1 Batch 1400	6.1 smp/sec	RPNLogLoss=0.122,	RPNL1Loss=0.0278,	RCNNLogLoss=0.327,	RCNNL1Loss=0.107,	
INFO:root:Epoch 1 Batch 1500	6.2 smp/sec	RPNLogLoss=0.102,	RPNL1Loss=0.041,	RCNNLogLoss=0.351,	RCNNL1Loss=0.106,	
INFO:root:Epoch 1 Batch 1600	5.9 smp/sec	RPNLogLoss=0.0807,	RPNL1Loss=0.022,	RCNNLogLoss=0.276,	RCNNL1Loss=0.102,	
INFO:root:Epoch 1 Batch 1700	6.0 smp/sec	RPNLogLoss=0.09,	RPNL1Loss=0.0128,	RCNNLogLoss=0.342,	RCNNL1Loss=0.106,	
INFO:root:Epoch 1 Batch 1800	6.1 smp/sec	RPNLogLoss=0.0819,	RPNL1Loss=0.0113,	RCNNLogLoss=0.333,	RCNNL1Loss=0.116,	
INFO:root:Epoch 1 Batch 1900	5.9 smp/sec	RPNLogLoss=0.0788,	RPNL1Loss=0.0201,	RCNNLogLoss=0.311,	RCNNL1Loss=0.0934,	
INFO:root:Epoch 1 Batch 2000	6.1 smp/sec	RPNLogLoss=0.0907,	RPNL1Loss=0.0223,	RCNNLogLoss=0.337,	RCNNL1Loss=0.0987,	
INFO:root:Epoch 1 Batch 2100	6.2 smp/sec	RPNLogLoss=0.0928,	RPNL1Loss=0.0241,	RCNNLogLoss=0.319,	RCNNL1Loss=0.102,	
INFO:root:Epoch 1 Batch 2200	6.2 smp/sec	RPNLogLoss=0.112,	RPNL1Loss=0.0238,	RCNNLogLoss=0.309,	RCNNL1Loss=0.0908,	
INFO:root:Epoch 1 Batch 2300	6.3 smp/sec	RPNLogLoss=0.0749,	RPNL1Loss=0.0183,	RCNNLogLoss=0.311,	RCNNL1Loss=0.111,	
INFO:root:Epoch 1 Batch 2400	6.2 smp/sec	RPNLogLoss=0.0836,	RPNL1Loss=0.0136,	RCNNLogLoss=0.292,	RCNNL1Loss=0.094,	
INFO:root:Epoch 1 Batch 2500	6.0 smp/sec	RPNLogLoss=0.109,	RPNL1Loss=0.0218,	RCNNLogLoss=0.342,	RCNNL1Loss=0.0966,	
INFO:root:Epoch 1 Batch 2600	6.0 smp/sec	RPNLogLoss=0.0729,	RPNL1Loss=0.0172,	RCNNLogLoss=0.314,	RCNNL1Loss=0.0915,	
INFO:root:Epoch 1 Batch 2700	6.1 smp/sec	RPNLogLoss=0.0874,	RPNL1Loss=0.0189,	RCNNLogLoss=0.337,	RCNNL1Loss=0.0935,	
INFO:root:Epoch 1 Batch 2800	6.1 smp/sec	RPNLogLoss=0.0781,	RPNL1Loss=0.0192,	RCNNLogLoss=0.337,	RCNNL1Loss=0.105,	
INFO:root:Epoch 1 Batch 2900	6.0 smp/sec	RPNLogLoss=0.0976,	RPNL1Loss=0.0172,	RCNNLogLoss=0.315,	RCNNL1Loss=0.0896,	
INFO:root:Epoch 1 Batch 3000	6.1 smp/sec	RPNLogLoss=0.103,	RPNL1Loss=0.0191,	RCNNLogLoss=0.338,	RCNNL1Loss=0.101,	
INFO:root:Epoch 1 Batch 3100	6.2 smp/sec	RPNLogLoss=0.0862,	RPNL1Loss=0.0135,	RCNNLogLoss=0.336,	RCNNL1Loss=0.102,	
INFO:root:Epoch 1 Batch 3200	6.1 smp/sec	RPNLogLoss=0.0708,	RPNL1Loss=0.0174,	RCNNLogLoss=0.33,	RCNNL1Loss=0.117,	
INFO:root:Epoch 1 Batch 3300	6.1 smp/sec	RPNLogLoss=0.0744,	RPNL1Loss=0.0215,	RCNNLogLoss=0.331,	RCNNL1Loss=0.0965,	
INFO:root:Epoch[1] Train-RPNLogLoss=0.069116
INFO:root:Epoch[1] Train-RPNL1Loss=0.014501
INFO:root:Epoch[1] Train-RCNNLogLoss=0.311115
INFO:root:Epoch[1] Train-RCNNL1Loss=0.085224
INFO:root:Epoch[1] Time cost=557.638
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0002.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0002.params
INFO:root:im_detect: 0/4791 data 0.180s im_detect 0.140s misc 0.005s
INFO:root:im_detect: 200/4791 data 0.014s im_detect 0.093s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.014s im_detect 0.090s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.29793329 0.38448946 0.4849601  0.58236137 0.65848169 0.72027829]
=============================>PR<============================
precision:
[0.37803449 0.28170915 0.19829317 0.12930486 0.07745631 0.04390341]
recall:
[0.29793329 0.38448946 0.4849601  0.58236137 0.65848169 0.72027829]
f-measure:
[0.33323794 0.32517089 0.2814894  0.21162211 0.13860832 0.08276219]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
model/3DCE 1 image 3 slice-0001.params deleted to keep only the best model
INFO:root:Validate callback: 0.582361
INFO:root:Returned Validation=0.085224
INFO:root:Retraining data=0.085224
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 2
INFO:root:sample boxes filtered, images: 22478 -> 3371, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 2 Batch 0	0.2 smp/sec	RPNLogLoss=0.0677,	RPNL1Loss=0.0139,	RCNNLogLoss=0.309,	RCNNL1Loss=0.0854,	
INFO:root:Epoch 2 Batch 100	5.9 smp/sec	RPNLogLoss=0.0691,	RPNL1Loss=0.0116,	RCNNLogLoss=0.306,	RCNNL1Loss=0.0889,	
INFO:root:Epoch 2 Batch 200	6.0 smp/sec	RPNLogLoss=0.0904,	RPNL1Loss=0.0194,	RCNNLogLoss=0.313,	RCNNL1Loss=0.0925,	
INFO:root:Epoch 2 Batch 300	6.0 smp/sec	RPNLogLoss=0.0595,	RPNL1Loss=0.0185,	RCNNLogLoss=0.288,	RCNNL1Loss=0.0931,	
INFO:root:Epoch 2 Batch 400	6.0 smp/sec	RPNLogLoss=0.0619,	RPNL1Loss=0.0137,	RCNNLogLoss=0.325,	RCNNL1Loss=0.113,	
INFO:root:Epoch 2 Batch 500	6.1 smp/sec	RPNLogLoss=0.107,	RPNL1Loss=0.0185,	RCNNLogLoss=0.294,	RCNNL1Loss=0.0935,	
INFO:root:Epoch 2 Batch 600	6.0 smp/sec	RPNLogLoss=0.081,	RPNL1Loss=0.0234,	RCNNLogLoss=0.3,	RCNNL1Loss=0.0939,	
INFO:root:Epoch 2 Batch 700	5.9 smp/sec	RPNLogLoss=0.0649,	RPNL1Loss=0.0131,	RCNNLogLoss=0.266,	RCNNL1Loss=0.083,	
INFO:root:Epoch 2 Batch 800	6.0 smp/sec	RPNLogLoss=0.0729,	RPNL1Loss=0.0247,	RCNNLogLoss=0.312,	RCNNL1Loss=0.0874,	
INFO:root:Epoch 2 Batch 900	6.2 smp/sec	RPNLogLoss=0.083,	RPNL1Loss=0.015,	RCNNLogLoss=0.301,	RCNNL1Loss=0.0922,	
INFO:root:Epoch 2 Batch 1000	6.0 smp/sec	RPNLogLoss=0.0595,	RPNL1Loss=0.0129,	RCNNLogLoss=0.288,	RCNNL1Loss=0.0926,	
INFO:root:Epoch 2 Batch 1100	6.0 smp/sec	RPNLogLoss=0.0792,	RPNL1Loss=0.014,	RCNNLogLoss=0.309,	RCNNL1Loss=0.0963,	
INFO:root:Epoch 2 Batch 1200	6.1 smp/sec	RPNLogLoss=0.0527,	RPNL1Loss=0.0111,	RCNNLogLoss=0.287,	RCNNL1Loss=0.0902,	
INFO:root:Epoch 2 Batch 1300	6.1 smp/sec	RPNLogLoss=0.0551,	RPNL1Loss=0.0161,	RCNNLogLoss=0.296,	RCNNL1Loss=0.0904,	
INFO:root:Epoch 2 Batch 1400	6.0 smp/sec	RPNLogLoss=0.0678,	RPNL1Loss=0.0137,	RCNNLogLoss=0.295,	RCNNL1Loss=0.0909,	
INFO:root:Epoch 2 Batch 1500	6.0 smp/sec	RPNLogLoss=0.0755,	RPNL1Loss=0.0154,	RCNNLogLoss=0.293,	RCNNL1Loss=0.0905,	
INFO:root:Epoch 2 Batch 1600	6.2 smp/sec	RPNLogLoss=0.0777,	RPNL1Loss=0.0132,	RCNNLogLoss=0.322,	RCNNL1Loss=0.0929,	
INFO:root:Epoch 2 Batch 1700	6.0 smp/sec	RPNLogLoss=0.0708,	RPNL1Loss=0.0149,	RCNNLogLoss=0.3,	RCNNL1Loss=0.091,	
INFO:root:Epoch 2 Batch 1800	6.0 smp/sec	RPNLogLoss=0.0712,	RPNL1Loss=0.0118,	RCNNLogLoss=0.32,	RCNNL1Loss=0.0933,	
INFO:root:Epoch 2 Batch 1900	6.0 smp/sec	RPNLogLoss=0.0625,	RPNL1Loss=0.0225,	RCNNLogLoss=0.285,	RCNNL1Loss=0.0854,	
INFO:root:Epoch 2 Batch 2000	6.0 smp/sec	RPNLogLoss=0.0702,	RPNL1Loss=0.017,	RCNNLogLoss=0.302,	RCNNL1Loss=0.0936,	
INFO:root:Epoch 2 Batch 2100	6.0 smp/sec	RPNLogLoss=0.0745,	RPNL1Loss=0.0184,	RCNNLogLoss=0.339,	RCNNL1Loss=0.0941,	
INFO:root:Epoch 2 Batch 2200	6.2 smp/sec	RPNLogLoss=0.0544,	RPNL1Loss=0.0128,	RCNNLogLoss=0.276,	RCNNL1Loss=0.0841,	
INFO:root:Epoch 2 Batch 2300	6.1 smp/sec	RPNLogLoss=0.0925,	RPNL1Loss=0.0195,	RCNNLogLoss=0.351,	RCNNL1Loss=0.104,	
INFO:root:Epoch 2 Batch 2400	6.1 smp/sec	RPNLogLoss=0.065,	RPNL1Loss=0.0121,	RCNNLogLoss=0.282,	RCNNL1Loss=0.0912,	
INFO:root:Epoch 2 Batch 2500	6.1 smp/sec	RPNLogLoss=0.078,	RPNL1Loss=0.0204,	RCNNLogLoss=0.311,	RCNNL1Loss=0.0902,	
INFO:root:Epoch 2 Batch 2600	6.1 smp/sec	RPNLogLoss=0.0634,	RPNL1Loss=0.0125,	RCNNLogLoss=0.266,	RCNNL1Loss=0.09,	
INFO:root:Epoch 2 Batch 2700	6.1 smp/sec	RPNLogLoss=0.085,	RPNL1Loss=0.0202,	RCNNLogLoss=0.302,	RCNNL1Loss=0.0879,	
INFO:root:Epoch 2 Batch 2800	6.1 smp/sec	RPNLogLoss=0.0733,	RPNL1Loss=0.0118,	RCNNLogLoss=0.295,	RCNNL1Loss=0.0694,	
INFO:root:Epoch 2 Batch 2900	6.3 smp/sec	RPNLogLoss=0.112,	RPNL1Loss=0.0325,	RCNNLogLoss=0.329,	RCNNL1Loss=0.0835,	
INFO:root:Epoch 2 Batch 3000	6.3 smp/sec	RPNLogLoss=0.107,	RPNL1Loss=0.121,	RCNNLogLoss=0.243,	RCNNL1Loss=0.0799,	
INFO:root:Epoch 2 Batch 3100	6.0 smp/sec	RPNLogLoss=0.0586,	RPNL1Loss=0.011,	RCNNLogLoss=0.259,	RCNNL1Loss=0.0842,	
INFO:root:Epoch 2 Batch 3200	6.1 smp/sec	RPNLogLoss=0.0863,	RPNL1Loss=0.0214,	RCNNLogLoss=0.274,	RCNNL1Loss=0.0818,	
INFO:root:Epoch 2 Batch 3300	6.0 smp/sec	RPNLogLoss=0.0878,	RPNL1Loss=0.017,	RCNNLogLoss=0.293,	RCNNL1Loss=0.0979,	
INFO:root:Epoch[2] Train-RPNLogLoss=0.079326
INFO:root:Epoch[2] Train-RPNL1Loss=0.010474
INFO:root:Epoch[2] Train-RCNNLogLoss=0.341727
INFO:root:Epoch[2] Train-RCNNL1Loss=0.086887
INFO:root:Epoch[2] Time cost=557.181
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0003.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0003.params
INFO:root:im_detect: 0/4791 data 0.105s im_detect 0.100s misc 0.006s
INFO:root:im_detect: 200/4791 data 0.015s im_detect 0.091s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.015s im_detect 0.089s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.33578883 0.43278085 0.53161449 0.62717414 0.70165746 0.76836505]
=============================>PR<============================
precision:
[0.40654033 0.30625543 0.21330049 0.13788295 0.08211797 0.04669759]
recall:
[0.33578883 0.43278085 0.53161449 0.62717414 0.70165746 0.76836505]
f-measure:
[0.36779291 0.35868736 0.30444718 0.22606579 0.14702856 0.08804427]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
model/3DCE 1 image 3 slice-0002.params deleted to keep only the best model
INFO:root:Validate callback: 0.627174
INFO:root:Returned Validation=0.086887
INFO:root:Retraining data=0.086887
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 3
INFO:root:sample boxes filtered, images: 22478 -> 3388, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 3 Batch 0	0.2 smp/sec	RPNLogLoss=0.0796,	RPNL1Loss=0.0104,	RCNNLogLoss=0.337,	RCNNL1Loss=0.0856,	
INFO:root:Epoch 3 Batch 100	6.0 smp/sec	RPNLogLoss=0.0431,	RPNL1Loss=0.00879,	RCNNLogLoss=0.281,	RCNNL1Loss=0.0926,	
INFO:root:Epoch 3 Batch 200	5.8 smp/sec	RPNLogLoss=0.0714,	RPNL1Loss=0.02,	RCNNLogLoss=0.304,	RCNNL1Loss=0.0882,	
INFO:root:Epoch 3 Batch 300	5.9 smp/sec	RPNLogLoss=0.0543,	RPNL1Loss=0.0105,	RCNNLogLoss=0.243,	RCNNL1Loss=0.0876,	
INFO:root:Epoch 3 Batch 400	6.0 smp/sec	RPNLogLoss=0.0661,	RPNL1Loss=0.0117,	RCNNLogLoss=0.328,	RCNNL1Loss=0.0994,	
INFO:root:Epoch 3 Batch 500	5.9 smp/sec	RPNLogLoss=0.0605,	RPNL1Loss=0.00991,	RCNNLogLoss=0.297,	RCNNL1Loss=0.0795,	
INFO:root:Epoch 3 Batch 600	6.1 smp/sec	RPNLogLoss=0.08,	RPNL1Loss=0.0153,	RCNNLogLoss=0.317,	RCNNL1Loss=0.0934,	
INFO:root:Epoch 3 Batch 700	6.0 smp/sec	RPNLogLoss=0.0841,	RPNL1Loss=0.0169,	RCNNLogLoss=0.318,	RCNNL1Loss=0.0937,	
INFO:root:Epoch 3 Batch 800	6.0 smp/sec	RPNLogLoss=0.0772,	RPNL1Loss=0.0151,	RCNNLogLoss=0.321,	RCNNL1Loss=0.0904,	
INFO:root:Epoch 3 Batch 900	6.0 smp/sec	RPNLogLoss=0.0511,	RPNL1Loss=0.0104,	RCNNLogLoss=0.262,	RCNNL1Loss=0.0749,	
INFO:root:Epoch 3 Batch 1000	6.0 smp/sec	RPNLogLoss=0.0486,	RPNL1Loss=0.00826,	RCNNLogLoss=0.31,	RCNNL1Loss=0.0889,	
INFO:root:Epoch 3 Batch 1100	5.9 smp/sec	RPNLogLoss=0.0501,	RPNL1Loss=0.0107,	RCNNLogLoss=0.26,	RCNNL1Loss=0.0709,	
INFO:root:Epoch 3 Batch 1200	6.1 smp/sec	RPNLogLoss=0.0837,	RPNL1Loss=0.0199,	RCNNLogLoss=0.29,	RCNNL1Loss=0.0794,	
INFO:root:Epoch 3 Batch 1300	6.0 smp/sec	RPNLogLoss=0.078,	RPNL1Loss=0.016,	RCNNLogLoss=0.309,	RCNNL1Loss=0.0888,	
INFO:root:Epoch 3 Batch 1400	6.0 smp/sec	RPNLogLoss=0.0684,	RPNL1Loss=0.0205,	RCNNLogLoss=0.263,	RCNNL1Loss=0.0823,	
INFO:root:Epoch 3 Batch 1500	5.9 smp/sec	RPNLogLoss=0.0685,	RPNL1Loss=0.0139,	RCNNLogLoss=0.285,	RCNNL1Loss=0.0768,	
INFO:root:Epoch 3 Batch 1600	6.0 smp/sec	RPNLogLoss=0.0602,	RPNL1Loss=0.0126,	RCNNLogLoss=0.284,	RCNNL1Loss=0.0839,	
INFO:root:Epoch 3 Batch 1700	6.1 smp/sec	RPNLogLoss=0.0612,	RPNL1Loss=0.0154,	RCNNLogLoss=0.267,	RCNNL1Loss=0.086,	
INFO:root:Epoch 3 Batch 1800	5.9 smp/sec	RPNLogLoss=0.0508,	RPNL1Loss=0.013,	RCNNLogLoss=0.291,	RCNNL1Loss=0.0828,	
INFO:root:Epoch 3 Batch 1900	5.9 smp/sec	RPNLogLoss=0.0536,	RPNL1Loss=0.0129,	RCNNLogLoss=0.297,	RCNNL1Loss=0.0892,	
INFO:root:Epoch 3 Batch 2000	5.8 smp/sec	RPNLogLoss=0.0644,	RPNL1Loss=0.0125,	RCNNLogLoss=0.327,	RCNNL1Loss=0.0843,	
INFO:root:Epoch 3 Batch 2100	5.9 smp/sec	RPNLogLoss=0.062,	RPNL1Loss=0.0139,	RCNNLogLoss=0.294,	RCNNL1Loss=0.0905,	
INFO:root:Epoch 3 Batch 2200	5.9 smp/sec	RPNLogLoss=0.0478,	RPNL1Loss=0.00774,	RCNNLogLoss=0.33,	RCNNL1Loss=0.0919,	
INFO:root:Epoch 3 Batch 2300	6.0 smp/sec	RPNLogLoss=0.0416,	RPNL1Loss=0.0111,	RCNNLogLoss=0.278,	RCNNL1Loss=0.0797,	
INFO:root:Epoch 3 Batch 2400	6.0 smp/sec	RPNLogLoss=0.0588,	RPNL1Loss=0.0107,	RCNNLogLoss=0.324,	RCNNL1Loss=0.0902,	
INFO:root:Epoch 3 Batch 2500	6.1 smp/sec	RPNLogLoss=0.0642,	RPNL1Loss=0.0136,	RCNNLogLoss=0.285,	RCNNL1Loss=0.0901,	
INFO:root:Epoch 3 Batch 2600	6.1 smp/sec	RPNLogLoss=0.0484,	RPNL1Loss=0.0134,	RCNNLogLoss=0.271,	RCNNL1Loss=0.0854,	
INFO:root:Epoch 3 Batch 2700	6.0 smp/sec	RPNLogLoss=0.07,	RPNL1Loss=0.0148,	RCNNLogLoss=0.33,	RCNNL1Loss=0.0897,	
INFO:root:Epoch 3 Batch 2800	6.1 smp/sec	RPNLogLoss=0.0641,	RPNL1Loss=0.0135,	RCNNLogLoss=0.294,	RCNNL1Loss=0.0907,	
INFO:root:Epoch 3 Batch 2900	6.0 smp/sec	RPNLogLoss=0.06,	RPNL1Loss=0.0146,	RCNNLogLoss=0.29,	RCNNL1Loss=0.0851,	
INFO:root:Epoch 3 Batch 3000	6.1 smp/sec	RPNLogLoss=0.0442,	RPNL1Loss=0.00889,	RCNNLogLoss=0.249,	RCNNL1Loss=0.0739,	
INFO:root:Epoch 3 Batch 3100	6.1 smp/sec	RPNLogLoss=0.0659,	RPNL1Loss=0.0157,	RCNNLogLoss=0.317,	RCNNL1Loss=0.0854,	
INFO:root:Epoch 3 Batch 3200	6.1 smp/sec	RPNLogLoss=0.0683,	RPNL1Loss=0.0124,	RCNNLogLoss=0.294,	RCNNL1Loss=0.0842,	
INFO:root:Epoch 3 Batch 3300	6.2 smp/sec	RPNLogLoss=0.0507,	RPNL1Loss=0.0153,	RCNNLogLoss=0.272,	RCNNL1Loss=0.0844,	
INFO:root:Epoch[3] Train-RPNLogLoss=0.072233
INFO:root:Epoch[3] Train-RPNL1Loss=0.018415
INFO:root:Epoch[3] Train-RCNNLogLoss=0.302603
INFO:root:Epoch[3] Train-RCNNL1Loss=0.083960
INFO:root:Epoch[3] Time cost=565.968
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0004.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0004.params
INFO:root:im_detect: 0/4791 data 0.068s im_detect 0.112s misc 0.005s
INFO:root:im_detect: 200/4791 data 0.014s im_detect 0.092s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.014s im_detect 0.091s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.36198077 0.4649069  0.56517291 0.66257418 0.7354205  0.79271537]
=============================>PR<============================
precision:
[0.42478089 0.32167634 0.22375243 0.14454067 0.08573064 0.0481063 ]
recall:
[0.36198077 0.4649069  0.56517291 0.66257418 0.7354205  0.79271537]
f-measure:
[0.39087444 0.38025105 0.32058499 0.23731174 0.15356021 0.09070794]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
Iter 4: 0.6626
model/3DCE 1 image 3 slice-0003.params deleted to keep only the best model
INFO:root:Validate callback: 0.662574
INFO:root:Returned Validation=0.083960
INFO:root:Retraining data=0.083960
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 4
INFO:root:sample boxes filtered, images: 22478 -> 3332, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 4 Batch 0	0.2 smp/sec	RPNLogLoss=0.0724,	RPNL1Loss=0.0186,	RCNNLogLoss=0.303,	RCNNL1Loss=0.0839,	
INFO:root:Update[13645]: Change learning rate to 1.00000e-04
INFO:root:Epoch 4 Batch 100	5.9 smp/sec	RPNLogLoss=0.0546,	RPNL1Loss=0.0129,	RCNNLogLoss=0.252,	RCNNL1Loss=0.0807,	
INFO:root:Epoch 4 Batch 200	6.0 smp/sec	RPNLogLoss=0.0503,	RPNL1Loss=0.0129,	RCNNLogLoss=0.242,	RCNNL1Loss=0.0733,	
INFO:root:Epoch 4 Batch 300	5.9 smp/sec	RPNLogLoss=0.0538,	RPNL1Loss=0.0105,	RCNNLogLoss=0.256,	RCNNL1Loss=0.0794,	
INFO:root:Epoch 4 Batch 400	5.9 smp/sec	RPNLogLoss=0.0451,	RPNL1Loss=0.00812,	RCNNLogLoss=0.232,	RCNNL1Loss=0.0686,	
INFO:root:Epoch 4 Batch 500	6.1 smp/sec	RPNLogLoss=0.0432,	RPNL1Loss=0.00816,	RCNNLogLoss=0.234,	RCNNL1Loss=0.0714,	
INFO:root:Epoch 4 Batch 600	5.9 smp/sec	RPNLogLoss=0.0491,	RPNL1Loss=0.0107,	RCNNLogLoss=0.231,	RCNNL1Loss=0.0793,	
INFO:root:Epoch 4 Batch 700	6.0 smp/sec	RPNLogLoss=0.0541,	RPNL1Loss=0.00898,	RCNNLogLoss=0.254,	RCNNL1Loss=0.0631,	
INFO:root:Epoch 4 Batch 800	5.9 smp/sec	RPNLogLoss=0.0374,	RPNL1Loss=0.0104,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0655,	
INFO:root:Epoch 4 Batch 900	6.0 smp/sec	RPNLogLoss=0.0437,	RPNL1Loss=0.00975,	RCNNLogLoss=0.217,	RCNNL1Loss=0.0711,	
INFO:root:Epoch 4 Batch 1000	6.0 smp/sec	RPNLogLoss=0.0504,	RPNL1Loss=0.0125,	RCNNLogLoss=0.25,	RCNNL1Loss=0.0703,	
INFO:root:Epoch 4 Batch 1100	6.0 smp/sec	RPNLogLoss=0.0676,	RPNL1Loss=0.00977,	RCNNLogLoss=0.249,	RCNNL1Loss=0.0652,	
INFO:root:Epoch 4 Batch 1200	6.0 smp/sec	RPNLogLoss=0.0339,	RPNL1Loss=0.00871,	RCNNLogLoss=0.215,	RCNNL1Loss=0.0685,	
INFO:root:Epoch 4 Batch 1300	6.0 smp/sec	RPNLogLoss=0.0376,	RPNL1Loss=0.00702,	RCNNLogLoss=0.223,	RCNNL1Loss=0.0701,	
INFO:root:Epoch 4 Batch 1400	6.2 smp/sec	RPNLogLoss=0.0358,	RPNL1Loss=0.00686,	RCNNLogLoss=0.235,	RCNNL1Loss=0.0703,	
INFO:root:Epoch 4 Batch 1500	6.1 smp/sec	RPNLogLoss=0.0525,	RPNL1Loss=0.00865,	RCNNLogLoss=0.221,	RCNNL1Loss=0.0763,	
INFO:root:Epoch 4 Batch 1600	6.3 smp/sec	RPNLogLoss=0.0526,	RPNL1Loss=0.00832,	RCNNLogLoss=0.222,	RCNNL1Loss=0.0636,	
INFO:root:Epoch 4 Batch 1700	6.1 smp/sec	RPNLogLoss=0.0758,	RPNL1Loss=0.0126,	RCNNLogLoss=0.221,	RCNNL1Loss=0.0687,	
INFO:root:Epoch 4 Batch 1800	6.1 smp/sec	RPNLogLoss=0.0624,	RPNL1Loss=0.0197,	RCNNLogLoss=0.242,	RCNNL1Loss=0.0729,	
INFO:root:Epoch 4 Batch 1900	5.9 smp/sec	RPNLogLoss=0.0451,	RPNL1Loss=0.0092,	RCNNLogLoss=0.226,	RCNNL1Loss=0.0737,	
INFO:root:Epoch 4 Batch 2000	6.1 smp/sec	RPNLogLoss=0.0347,	RPNL1Loss=0.00729,	RCNNLogLoss=0.227,	RCNNL1Loss=0.0724,	
INFO:root:Epoch 4 Batch 2100	6.2 smp/sec	RPNLogLoss=0.0423,	RPNL1Loss=0.00796,	RCNNLogLoss=0.228,	RCNNL1Loss=0.0648,	
INFO:root:Epoch 4 Batch 2200	6.4 smp/sec	RPNLogLoss=0.0683,	RPNL1Loss=0.0139,	RCNNLogLoss=0.236,	RCNNL1Loss=0.0733,	
INFO:root:Epoch 4 Batch 2300	6.4 smp/sec	RPNLogLoss=0.056,	RPNL1Loss=0.0146,	RCNNLogLoss=0.232,	RCNNL1Loss=0.0643,	
INFO:root:Epoch 4 Batch 2400	6.2 smp/sec	RPNLogLoss=0.0502,	RPNL1Loss=0.00786,	RCNNLogLoss=0.24,	RCNNL1Loss=0.0723,	
INFO:root:Epoch 4 Batch 2500	6.1 smp/sec	RPNLogLoss=0.0528,	RPNL1Loss=0.00864,	RCNNLogLoss=0.238,	RCNNL1Loss=0.0668,	
INFO:root:Epoch 4 Batch 2600	6.0 smp/sec	RPNLogLoss=0.0485,	RPNL1Loss=0.00663,	RCNNLogLoss=0.226,	RCNNL1Loss=0.0692,	
INFO:root:Epoch 4 Batch 2700	6.1 smp/sec	RPNLogLoss=0.0333,	RPNL1Loss=0.00867,	RCNNLogLoss=0.181,	RCNNL1Loss=0.0641,	
INFO:root:Epoch 4 Batch 2800	6.1 smp/sec	RPNLogLoss=0.0649,	RPNL1Loss=0.0109,	RCNNLogLoss=0.24,	RCNNL1Loss=0.0694,	
INFO:root:Epoch 4 Batch 2900	6.0 smp/sec	RPNLogLoss=0.0387,	RPNL1Loss=0.00853,	RCNNLogLoss=0.224,	RCNNL1Loss=0.0644,	
INFO:root:Epoch 4 Batch 3000	6.1 smp/sec	RPNLogLoss=0.0358,	RPNL1Loss=0.00713,	RCNNLogLoss=0.213,	RCNNL1Loss=0.0669,	
INFO:root:Epoch 4 Batch 3100	6.1 smp/sec	RPNLogLoss=0.0846,	RPNL1Loss=0.0194,	RCNNLogLoss=0.207,	RCNNL1Loss=0.0729,	
INFO:root:Epoch 4 Batch 3200	6.1 smp/sec	RPNLogLoss=0.0412,	RPNL1Loss=0.00755,	RCNNLogLoss=0.24,	RCNNL1Loss=0.0698,	
INFO:root:Epoch 4 Batch 3300	6.0 smp/sec	RPNLogLoss=0.0452,	RPNL1Loss=0.0126,	RCNNLogLoss=0.231,	RCNNL1Loss=0.0734,	
INFO:root:Epoch[4] Train-RPNLogLoss=0.036924
INFO:root:Epoch[4] Train-RPNL1Loss=0.006600
INFO:root:Epoch[4] Train-RCNNLogLoss=0.225782
INFO:root:Epoch[4] Train-RCNNL1Loss=0.067374
INFO:root:Epoch[4] Time cost=549.660
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0005.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0005.params
INFO:root:im_detect: 0/4791 data 0.134s im_detect 0.157s misc 0.003s
INFO:root:im_detect: 200/4791 data 0.017s im_detect 0.092s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.016s im_detect 0.090s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.41395539 0.52383876 0.63044813 0.72580315 0.79353387 0.84018825]
=============================>PR<============================
precision:
[0.45784769 0.34825194 0.24330727 0.15617982 0.09188267 0.05084074]
recall:
[0.41395539 0.52383876 0.63044813 0.72580315 0.79353387 0.84018825]
f-measure:
[0.43479663 0.41836901 0.35111111 0.25704761 0.16469539 0.0958797 ]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
Iter 4: 0.6626
Iter 5: 0.7258
model/3DCE 1 image 3 slice-0004.params deleted to keep only the best model
INFO:root:Validate callback: 0.725803
INFO:root:Returned Validation=0.067374
INFO:root:Retraining data=0.067374
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 5
INFO:root:sample boxes filtered, images: 22478 -> 3304, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 5 Batch 0	0.2 smp/sec	RPNLogLoss=0.037,	RPNL1Loss=0.00662,	RCNNLogLoss=0.226,	RCNNL1Loss=0.0676,	
INFO:root:Epoch 5 Batch 100	5.9 smp/sec	RPNLogLoss=0.042,	RPNL1Loss=0.01,	RCNNLogLoss=0.196,	RCNNL1Loss=0.0589,	
INFO:root:Update[17056]: Change learning rate to 1.00000e-05
INFO:root:Epoch 5 Batch 200	5.7 smp/sec	RPNLogLoss=0.0596,	RPNL1Loss=0.0102,	RCNNLogLoss=0.234,	RCNNL1Loss=0.0728,	
INFO:root:Epoch 5 Batch 300	5.9 smp/sec	RPNLogLoss=0.0471,	RPNL1Loss=0.00722,	RCNNLogLoss=0.241,	RCNNL1Loss=0.0676,	
INFO:root:Epoch 5 Batch 400	5.9 smp/sec	RPNLogLoss=0.0497,	RPNL1Loss=0.0122,	RCNNLogLoss=0.208,	RCNNL1Loss=0.0657,	
INFO:root:Epoch 5 Batch 500	6.0 smp/sec	RPNLogLoss=0.0419,	RPNL1Loss=0.00797,	RCNNLogLoss=0.184,	RCNNL1Loss=0.0562,	
INFO:root:Epoch 5 Batch 600	5.9 smp/sec	RPNLogLoss=0.0423,	RPNL1Loss=0.0122,	RCNNLogLoss=0.206,	RCNNL1Loss=0.0727,	
INFO:root:Epoch 5 Batch 700	5.9 smp/sec	RPNLogLoss=0.0363,	RPNL1Loss=0.00867,	RCNNLogLoss=0.234,	RCNNL1Loss=0.0681,	
INFO:root:Epoch 5 Batch 800	6.0 smp/sec	RPNLogLoss=0.0406,	RPNL1Loss=0.00788,	RCNNLogLoss=0.236,	RCNNL1Loss=0.0723,	
INFO:root:Epoch 5 Batch 900	5.9 smp/sec	RPNLogLoss=0.0328,	RPNL1Loss=0.00961,	RCNNLogLoss=0.217,	RCNNL1Loss=0.0718,	
INFO:root:Epoch 5 Batch 1000	6.2 smp/sec	RPNLogLoss=0.0597,	RPNL1Loss=0.0106,	RCNNLogLoss=0.226,	RCNNL1Loss=0.0653,	
INFO:root:Epoch 5 Batch 1100	6.0 smp/sec	RPNLogLoss=0.0417,	RPNL1Loss=0.00663,	RCNNLogLoss=0.253,	RCNNL1Loss=0.0712,	
INFO:root:Epoch 5 Batch 1200	6.2 smp/sec	RPNLogLoss=0.0365,	RPNL1Loss=0.00637,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0665,	
INFO:root:Epoch 5 Batch 1300	5.9 smp/sec	RPNLogLoss=0.0404,	RPNL1Loss=0.00749,	RCNNLogLoss=0.204,	RCNNL1Loss=0.0602,	
INFO:root:Epoch 5 Batch 1400	6.1 smp/sec	RPNLogLoss=0.0349,	RPNL1Loss=0.00706,	RCNNLogLoss=0.22,	RCNNL1Loss=0.0675,	
INFO:root:Epoch 5 Batch 1500	6.1 smp/sec	RPNLogLoss=0.0404,	RPNL1Loss=0.00804,	RCNNLogLoss=0.21,	RCNNL1Loss=0.0715,	
INFO:root:Epoch 5 Batch 1600	6.1 smp/sec	RPNLogLoss=0.0343,	RPNL1Loss=0.011,	RCNNLogLoss=0.238,	RCNNL1Loss=0.0688,	
INFO:root:Epoch 5 Batch 1700	5.9 smp/sec	RPNLogLoss=0.0388,	RPNL1Loss=0.00851,	RCNNLogLoss=0.204,	RCNNL1Loss=0.0627,	
INFO:root:Epoch 5 Batch 1800	6.0 smp/sec	RPNLogLoss=0.055,	RPNL1Loss=0.0132,	RCNNLogLoss=0.222,	RCNNL1Loss=0.0747,	
INFO:root:Epoch 5 Batch 1900	5.9 smp/sec	RPNLogLoss=0.0376,	RPNL1Loss=0.00834,	RCNNLogLoss=0.207,	RCNNL1Loss=0.0628,	
INFO:root:Epoch 5 Batch 2000	6.0 smp/sec	RPNLogLoss=0.0312,	RPNL1Loss=0.0133,	RCNNLogLoss=0.19,	RCNNL1Loss=0.0688,	
INFO:root:Epoch 5 Batch 2100	6.1 smp/sec	RPNLogLoss=0.0391,	RPNL1Loss=0.0119,	RCNNLogLoss=0.235,	RCNNL1Loss=0.0678,	
INFO:root:Epoch 5 Batch 2200	6.0 smp/sec	RPNLogLoss=0.0361,	RPNL1Loss=0.00692,	RCNNLogLoss=0.196,	RCNNL1Loss=0.0567,	
INFO:root:Epoch 5 Batch 2300	6.1 smp/sec	RPNLogLoss=0.0276,	RPNL1Loss=0.00684,	RCNNLogLoss=0.182,	RCNNL1Loss=0.0669,	
INFO:root:Epoch 5 Batch 2400	6.0 smp/sec	RPNLogLoss=0.0409,	RPNL1Loss=0.01,	RCNNLogLoss=0.2,	RCNNL1Loss=0.0614,	
INFO:root:Epoch 5 Batch 2500	5.8 smp/sec	RPNLogLoss=0.0383,	RPNL1Loss=0.0094,	RCNNLogLoss=0.237,	RCNNL1Loss=0.0767,	
INFO:root:Epoch 5 Batch 2600	6.1 smp/sec	RPNLogLoss=0.038,	RPNL1Loss=0.00861,	RCNNLogLoss=0.199,	RCNNL1Loss=0.0738,	
INFO:root:Epoch 5 Batch 2700	6.0 smp/sec	RPNLogLoss=0.0341,	RPNL1Loss=0.00715,	RCNNLogLoss=0.199,	RCNNL1Loss=0.0636,	
INFO:root:Epoch 5 Batch 2800	5.8 smp/sec	RPNLogLoss=0.0566,	RPNL1Loss=0.00849,	RCNNLogLoss=0.265,	RCNNL1Loss=0.0662,	
INFO:root:Epoch 5 Batch 2900	5.9 smp/sec	RPNLogLoss=0.0371,	RPNL1Loss=0.00742,	RCNNLogLoss=0.231,	RCNNL1Loss=0.0649,	
INFO:root:Epoch 5 Batch 3000	5.9 smp/sec	RPNLogLoss=0.0325,	RPNL1Loss=0.0112,	RCNNLogLoss=0.197,	RCNNL1Loss=0.0701,	
INFO:root:Epoch 5 Batch 3100	5.9 smp/sec	RPNLogLoss=0.055,	RPNL1Loss=0.0136,	RCNNLogLoss=0.203,	RCNNL1Loss=0.0706,	
INFO:root:Epoch 5 Batch 3200	6.1 smp/sec	RPNLogLoss=0.0361,	RPNL1Loss=0.00556,	RCNNLogLoss=0.197,	RCNNL1Loss=0.062,	
INFO:root:Epoch 5 Batch 3300	5.8 smp/sec	RPNLogLoss=0.0421,	RPNL1Loss=0.00983,	RCNNLogLoss=0.23,	RCNNL1Loss=0.0644,	
INFO:root:Epoch[5] Train-RPNLogLoss=0.041916
INFO:root:Epoch[5] Train-RPNL1Loss=0.009814
INFO:root:Epoch[5] Train-RCNNLogLoss=0.228866
INFO:root:Epoch[5] Train-RCNNL1Loss=0.062720
INFO:root:Epoch[5] Time cost=554.102
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0006.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0006.params
INFO:root:im_detect: 0/4791 data 0.085s im_detect 0.148s misc 0.006s
INFO:root:im_detect: 200/4791 data 0.015s im_detect 0.091s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.014s im_detect 0.090s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.42848373 0.53816247 0.63679149 0.72887252 0.79373849 0.84162063]
=============================>PR<============================
precision:
[0.46642166 0.35439968 0.24515519 0.15673678 0.09190419 0.050923  ]
recall:
[0.42848373 0.53816247 0.63679149 0.72887252 0.79373849 0.84162063]
f-measure:
[0.44664854 0.42736432 0.35401854 0.25799442 0.16473436 0.0960353 ]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
Iter 4: 0.6626
Iter 5: 0.7258
Iter 6: 0.7289
model/3DCE 1 image 3 slice-0005.params deleted to keep only the best model
INFO:root:Validate callback: 0.728873
INFO:root:Returned Validation=0.062720
INFO:root:Retraining data=0.062720
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 6
INFO:root:sample boxes filtered, images: 22478 -> 3404, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 6 Batch 0	0.2 smp/sec	RPNLogLoss=0.042,	RPNL1Loss=0.00989,	RCNNLogLoss=0.23,	RCNNL1Loss=0.0624,	
INFO:root:Epoch 6 Batch 100	5.8 smp/sec	RPNLogLoss=0.0327,	RPNL1Loss=0.00523,	RCNNLogLoss=0.212,	RCNNL1Loss=0.0577,	
INFO:root:Epoch 6 Batch 200	5.9 smp/sec	RPNLogLoss=0.0336,	RPNL1Loss=0.00559,	RCNNLogLoss=0.192,	RCNNL1Loss=0.0582,	
INFO:root:Epoch 6 Batch 300	6.1 smp/sec	RPNLogLoss=0.0322,	RPNL1Loss=0.00911,	RCNNLogLoss=0.2,	RCNNL1Loss=0.0637,	
INFO:root:Epoch 6 Batch 400	6.1 smp/sec	RPNLogLoss=0.0268,	RPNL1Loss=0.00877,	RCNNLogLoss=0.22,	RCNNL1Loss=0.0655,	
INFO:root:Epoch 6 Batch 500	5.9 smp/sec	RPNLogLoss=0.0433,	RPNL1Loss=0.00842,	RCNNLogLoss=0.229,	RCNNL1Loss=0.0701,	
INFO:root:Epoch 6 Batch 600	6.4 smp/sec	RPNLogLoss=0.0356,	RPNL1Loss=0.00791,	RCNNLogLoss=0.22,	RCNNL1Loss=0.0653,	
INFO:root:Epoch 6 Batch 700	6.1 smp/sec	RPNLogLoss=0.039,	RPNL1Loss=0.00912,	RCNNLogLoss=0.204,	RCNNL1Loss=0.0725,	
INFO:root:Epoch 6 Batch 800	6.3 smp/sec	RPNLogLoss=0.036,	RPNL1Loss=0.00842,	RCNNLogLoss=0.205,	RCNNL1Loss=0.0623,	
INFO:root:Epoch 6 Batch 900	6.3 smp/sec	RPNLogLoss=0.0383,	RPNL1Loss=0.00972,	RCNNLogLoss=0.217,	RCNNL1Loss=0.0616,	
INFO:root:Epoch 6 Batch 1000	6.0 smp/sec	RPNLogLoss=0.0436,	RPNL1Loss=0.0143,	RCNNLogLoss=0.226,	RCNNL1Loss=0.0659,	
INFO:root:Epoch 6 Batch 1100	6.3 smp/sec	RPNLogLoss=0.0317,	RPNL1Loss=0.00727,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0627,	
INFO:root:Epoch 6 Batch 1200	6.2 smp/sec	RPNLogLoss=0.0326,	RPNL1Loss=0.00811,	RCNNLogLoss=0.195,	RCNNL1Loss=0.0646,	
INFO:root:Epoch 6 Batch 1300	6.1 smp/sec	RPNLogLoss=0.0419,	RPNL1Loss=0.0106,	RCNNLogLoss=0.202,	RCNNL1Loss=0.0663,	
INFO:root:Epoch 6 Batch 1400	6.2 smp/sec	RPNLogLoss=0.0487,	RPNL1Loss=0.0122,	RCNNLogLoss=0.243,	RCNNL1Loss=0.0732,	
INFO:root:Epoch 6 Batch 1500	6.1 smp/sec	RPNLogLoss=0.0373,	RPNL1Loss=0.00706,	RCNNLogLoss=0.221,	RCNNL1Loss=0.0643,	
INFO:root:Epoch 6 Batch 1600	6.0 smp/sec	RPNLogLoss=0.03,	RPNL1Loss=0.00625,	RCNNLogLoss=0.196,	RCNNL1Loss=0.0641,	
INFO:root:Epoch 6 Batch 1700	6.2 smp/sec	RPNLogLoss=0.0353,	RPNL1Loss=0.00738,	RCNNLogLoss=0.187,	RCNNL1Loss=0.0692,	
INFO:root:Epoch 6 Batch 1800	6.1 smp/sec	RPNLogLoss=0.0462,	RPNL1Loss=0.00723,	RCNNLogLoss=0.256,	RCNNL1Loss=0.0703,	
INFO:root:Epoch 6 Batch 1900	6.1 smp/sec	RPNLogLoss=0.0464,	RPNL1Loss=0.00759,	RCNNLogLoss=0.223,	RCNNL1Loss=0.0663,	
INFO:root:Epoch 6 Batch 2000	6.1 smp/sec	RPNLogLoss=0.0386,	RPNL1Loss=0.00647,	RCNNLogLoss=0.222,	RCNNL1Loss=0.0652,	
INFO:root:Epoch 6 Batch 2100	6.1 smp/sec	RPNLogLoss=0.0365,	RPNL1Loss=0.0142,	RCNNLogLoss=0.211,	RCNNL1Loss=0.0691,	
INFO:root:Epoch 6 Batch 2200	5.9 smp/sec	RPNLogLoss=0.075,	RPNL1Loss=0.0129,	RCNNLogLoss=0.254,	RCNNL1Loss=0.0676,	
INFO:root:Epoch 6 Batch 2300	6.2 smp/sec	RPNLogLoss=0.038,	RPNL1Loss=0.00916,	RCNNLogLoss=0.233,	RCNNL1Loss=0.0654,	
INFO:root:Epoch 6 Batch 2400	6.2 smp/sec	RPNLogLoss=0.0333,	RPNL1Loss=0.0138,	RCNNLogLoss=0.182,	RCNNL1Loss=0.0576,	
INFO:root:Epoch 6 Batch 2500	6.0 smp/sec	RPNLogLoss=0.0273,	RPNL1Loss=0.00709,	RCNNLogLoss=0.194,	RCNNL1Loss=0.062,	
INFO:root:Epoch 6 Batch 2600	6.0 smp/sec	RPNLogLoss=0.0264,	RPNL1Loss=0.00747,	RCNNLogLoss=0.199,	RCNNL1Loss=0.0643,	
INFO:root:Epoch 6 Batch 2700	6.0 smp/sec	RPNLogLoss=0.0282,	RPNL1Loss=0.00657,	RCNNLogLoss=0.208,	RCNNL1Loss=0.0618,	
INFO:root:Epoch 6 Batch 2800	6.0 smp/sec	RPNLogLoss=0.0315,	RPNL1Loss=0.00996,	RCNNLogLoss=0.205,	RCNNL1Loss=0.0618,	
INFO:root:Epoch 6 Batch 2900	5.9 smp/sec	RPNLogLoss=0.0554,	RPNL1Loss=0.00814,	RCNNLogLoss=0.218,	RCNNL1Loss=0.0606,	
INFO:root:Epoch 6 Batch 3000	6.1 smp/sec	RPNLogLoss=0.0475,	RPNL1Loss=0.00828,	RCNNLogLoss=0.238,	RCNNL1Loss=0.0695,	
INFO:root:Epoch 6 Batch 3100	5.9 smp/sec	RPNLogLoss=0.0448,	RPNL1Loss=0.00626,	RCNNLogLoss=0.234,	RCNNL1Loss=0.0652,	
INFO:root:Epoch 6 Batch 3200	6.1 smp/sec	RPNLogLoss=0.0393,	RPNL1Loss=0.0113,	RCNNLogLoss=0.221,	RCNNL1Loss=0.0632,	
INFO:root:Epoch 6 Batch 3300	5.8 smp/sec	RPNLogLoss=0.04,	RPNL1Loss=0.00824,	RCNNLogLoss=0.199,	RCNNL1Loss=0.066,	
INFO:root:Epoch 6 Batch 3400	6.0 smp/sec	RPNLogLoss=0.0449,	RPNL1Loss=0.00735,	RCNNLogLoss=0.202,	RCNNL1Loss=0.0614,	
INFO:root:Epoch[6] Train-RPNLogLoss=0.046266
INFO:root:Epoch[6] Train-RPNL1Loss=0.007470
INFO:root:Epoch[6] Train-RCNNLogLoss=0.207724
INFO:root:Epoch[6] Train-RCNNL1Loss=0.061259
INFO:root:Epoch[6] Time cost=561.495
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0007.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0007.params
INFO:root:im_detect: 0/4791 data 0.050s im_detect 0.141s misc 0.006s
INFO:root:im_detect: 200/4791 data 0.016s im_detect 0.092s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.015s im_detect 0.092s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.4299161  0.54225496 0.64047473 0.73562513 0.79946798 0.84530387]
=============================>PR<============================
precision:
[0.46725231 0.35613493 0.24622404 0.15795949 0.09250622 0.05113446]
recall:
[0.4299161  0.54225496 0.64047473 0.73562513 0.79946798 0.84530387]
f-measure:
[0.44780732 0.42991564 0.35570203 0.26007379 0.16582488 0.09643532]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
Iter 4: 0.6626
Iter 5: 0.7258
Iter 6: 0.7289
Iter 7: 0.7356
model/3DCE 1 image 3 slice-0006.params deleted to keep only the best model
INFO:root:Validate callback: 0.735625
INFO:root:Returned Validation=0.061259
INFO:root:Retraining data=0.061259
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 7
INFO:root:sample boxes filtered, images: 22478 -> 3374, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 7 Batch 0	0.2 smp/sec	RPNLogLoss=0.0464,	RPNL1Loss=0.00748,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0614,	
INFO:root:Epoch 7 Batch 100	5.9 smp/sec	RPNLogLoss=0.0453,	RPNL1Loss=0.00787,	RCNNLogLoss=0.225,	RCNNL1Loss=0.0654,	
INFO:root:Epoch 7 Batch 200	5.9 smp/sec	RPNLogLoss=0.0418,	RPNL1Loss=0.00616,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0653,	
INFO:root:Epoch 7 Batch 300	5.8 smp/sec	RPNLogLoss=0.0264,	RPNL1Loss=0.00635,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0652,	
INFO:root:Epoch 7 Batch 400	5.9 smp/sec	RPNLogLoss=0.0269,	RPNL1Loss=0.00611,	RCNNLogLoss=0.18,	RCNNL1Loss=0.0634,	
INFO:root:Epoch 7 Batch 500	6.0 smp/sec	RPNLogLoss=0.0467,	RPNL1Loss=0.00846,	RCNNLogLoss=0.231,	RCNNL1Loss=0.0622,	
INFO:root:Epoch 7 Batch 600	5.8 smp/sec	RPNLogLoss=0.036,	RPNL1Loss=0.00679,	RCNNLogLoss=0.227,	RCNNL1Loss=0.0675,	
INFO:root:Epoch 7 Batch 700	5.9 smp/sec	RPNLogLoss=0.0386,	RPNL1Loss=0.00855,	RCNNLogLoss=0.217,	RCNNL1Loss=0.067,	
INFO:root:Epoch 7 Batch 800	5.9 smp/sec	RPNLogLoss=0.0416,	RPNL1Loss=0.00865,	RCNNLogLoss=0.22,	RCNNL1Loss=0.0698,	
INFO:root:Epoch 7 Batch 900	6.0 smp/sec	RPNLogLoss=0.0481,	RPNL1Loss=0.0187,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0661,	
INFO:root:Epoch 7 Batch 1000	5.9 smp/sec	RPNLogLoss=0.0367,	RPNL1Loss=0.00884,	RCNNLogLoss=0.195,	RCNNL1Loss=0.0552,	
INFO:root:Epoch 7 Batch 1100	5.9 smp/sec	RPNLogLoss=0.0396,	RPNL1Loss=0.00824,	RCNNLogLoss=0.231,	RCNNL1Loss=0.0663,	
INFO:root:Epoch 7 Batch 1200	5.9 smp/sec	RPNLogLoss=0.0412,	RPNL1Loss=0.00736,	RCNNLogLoss=0.219,	RCNNL1Loss=0.0643,	
INFO:root:Epoch 7 Batch 1300	6.1 smp/sec	RPNLogLoss=0.0334,	RPNL1Loss=0.00644,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0643,	
INFO:root:Epoch 7 Batch 1400	6.1 smp/sec	RPNLogLoss=0.0475,	RPNL1Loss=0.00672,	RCNNLogLoss=0.232,	RCNNL1Loss=0.0663,	
INFO:root:Epoch 7 Batch 1500	6.0 smp/sec	RPNLogLoss=0.038,	RPNL1Loss=0.0116,	RCNNLogLoss=0.225,	RCNNL1Loss=0.073,	
INFO:root:Epoch 7 Batch 1600	6.1 smp/sec	RPNLogLoss=0.0329,	RPNL1Loss=0.00991,	RCNNLogLoss=0.192,	RCNNL1Loss=0.0651,	
INFO:root:Epoch 7 Batch 1700	6.0 smp/sec	RPNLogLoss=0.0394,	RPNL1Loss=0.00773,	RCNNLogLoss=0.219,	RCNNL1Loss=0.0662,	
INFO:root:Epoch 7 Batch 1800	6.0 smp/sec	RPNLogLoss=0.0388,	RPNL1Loss=0.00984,	RCNNLogLoss=0.221,	RCNNL1Loss=0.0714,	
INFO:root:Epoch 7 Batch 1900	6.0 smp/sec	RPNLogLoss=0.0368,	RPNL1Loss=0.00827,	RCNNLogLoss=0.205,	RCNNL1Loss=0.0667,	
INFO:root:Epoch 7 Batch 2000	6.0 smp/sec	RPNLogLoss=0.0372,	RPNL1Loss=0.0123,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0626,	
INFO:root:Epoch 7 Batch 2100	6.1 smp/sec	RPNLogLoss=0.0379,	RPNL1Loss=0.00683,	RCNNLogLoss=0.222,	RCNNL1Loss=0.0662,	
INFO:root:Epoch 7 Batch 2200	6.1 smp/sec	RPNLogLoss=0.0383,	RPNL1Loss=0.0141,	RCNNLogLoss=0.203,	RCNNL1Loss=0.0642,	
INFO:root:Epoch 7 Batch 2300	6.2 smp/sec	RPNLogLoss=0.0391,	RPNL1Loss=0.00727,	RCNNLogLoss=0.201,	RCNNL1Loss=0.0572,	
INFO:root:Epoch 7 Batch 2400	6.1 smp/sec	RPNLogLoss=0.0383,	RPNL1Loss=0.00959,	RCNNLogLoss=0.205,	RCNNL1Loss=0.0646,	
INFO:root:Epoch 7 Batch 2500	6.0 smp/sec	RPNLogLoss=0.0385,	RPNL1Loss=0.00965,	RCNNLogLoss=0.217,	RCNNL1Loss=0.064,	
INFO:root:Epoch 7 Batch 2600	6.0 smp/sec	RPNLogLoss=0.0433,	RPNL1Loss=0.00753,	RCNNLogLoss=0.24,	RCNNL1Loss=0.0672,	
INFO:root:Epoch 7 Batch 2700	6.2 smp/sec	RPNLogLoss=0.0491,	RPNL1Loss=0.0128,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0766,	
INFO:root:Epoch 7 Batch 2800	6.0 smp/sec	RPNLogLoss=0.0365,	RPNL1Loss=0.00985,	RCNNLogLoss=0.227,	RCNNL1Loss=0.0718,	
INFO:root:Epoch 7 Batch 2900	6.0 smp/sec	RPNLogLoss=0.0289,	RPNL1Loss=0.007,	RCNNLogLoss=0.196,	RCNNL1Loss=0.0672,	
INFO:root:Epoch 7 Batch 3000	6.1 smp/sec	RPNLogLoss=0.035,	RPNL1Loss=0.00708,	RCNNLogLoss=0.215,	RCNNL1Loss=0.0714,	
INFO:root:Epoch 7 Batch 3100	6.0 smp/sec	RPNLogLoss=0.0328,	RPNL1Loss=0.0136,	RCNNLogLoss=0.241,	RCNNL1Loss=0.0695,	
INFO:root:Epoch 7 Batch 3200	6.0 smp/sec	RPNLogLoss=0.0561,	RPNL1Loss=0.00709,	RCNNLogLoss=0.245,	RCNNL1Loss=0.0674,	
INFO:root:Epoch 7 Batch 3300	6.1 smp/sec	RPNLogLoss=0.0464,	RPNL1Loss=0.00908,	RCNNLogLoss=0.208,	RCNNL1Loss=0.0636,	
INFO:root:Epoch[7] Train-RPNLogLoss=0.032883
INFO:root:Epoch[7] Train-RPNL1Loss=0.005634
INFO:root:Epoch[7] Train-RCNNLogLoss=0.183265
INFO:root:Epoch[7] Train-RCNNL1Loss=0.062438
INFO:root:Epoch[7] Time cost=563.778
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0008.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0008.params
INFO:root:im_detect: 0/4791 data 0.088s im_detect 0.107s misc 0.003s
INFO:root:im_detect: 200/4791 data 0.017s im_detect 0.092s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.016s im_detect 0.091s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.42827911 0.54123184 0.63883773 0.73357888 0.79762636 0.843053  ]
=============================>PR<============================
precision:
[0.46630278 0.35570199 0.24574937 0.15758934 0.09231279 0.05100525]
recall:
[0.42827911 0.54123184 0.63883773 0.73357888 0.79762636 0.843053  ]
f-measure:
[0.44648286 0.42927858 0.35495424 0.2594442  0.1654745  0.09619089]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
Iter 4: 0.6626
Iter 5: 0.7258
Iter 6: 0.7289
Iter 7: 0.7356
Iter 8: 0.7336
model/3DCE 1 image 3 slice-0008.params deleted to keep only the best model
INFO:root:Validate callback: 0.733579
INFO:root:Returned Validation=0.062438
INFO:root:Retraining data=0.062438
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 8
INFO:root:sample boxes filtered, images: 22478 -> 3398, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
INFO:root:Epoch 8 Batch 0	0.2 smp/sec	RPNLogLoss=0.0327,	RPNL1Loss=0.00563,	RCNNLogLoss=0.183,	RCNNL1Loss=0.0624,	
INFO:root:Epoch 8 Batch 100	5.8 smp/sec	RPNLogLoss=0.0303,	RPNL1Loss=0.00566,	RCNNLogLoss=0.237,	RCNNL1Loss=0.0642,	
INFO:root:Epoch 8 Batch 200	6.0 smp/sec	RPNLogLoss=0.0493,	RPNL1Loss=0.00941,	RCNNLogLoss=0.241,	RCNNL1Loss=0.0777,	
INFO:root:Epoch 8 Batch 300	6.0 smp/sec	RPNLogLoss=0.0385,	RPNL1Loss=0.00781,	RCNNLogLoss=0.182,	RCNNL1Loss=0.0568,	
INFO:root:Epoch 8 Batch 400	5.9 smp/sec	RPNLogLoss=0.0419,	RPNL1Loss=0.00737,	RCNNLogLoss=0.223,	RCNNL1Loss=0.0693,	
INFO:root:Epoch 8 Batch 500	5.9 smp/sec	RPNLogLoss=0.0341,	RPNL1Loss=0.00937,	RCNNLogLoss=0.192,	RCNNL1Loss=0.0648,	
INFO:root:Epoch 8 Batch 600	6.0 smp/sec	RPNLogLoss=0.0366,	RPNL1Loss=0.00835,	RCNNLogLoss=0.181,	RCNNL1Loss=0.0549,	
INFO:root:Epoch 8 Batch 700	6.1 smp/sec	RPNLogLoss=0.0547,	RPNL1Loss=0.0108,	RCNNLogLoss=0.225,	RCNNL1Loss=0.067,	
INFO:root:Epoch 8 Batch 800	6.1 smp/sec	RPNLogLoss=0.0377,	RPNL1Loss=0.00798,	RCNNLogLoss=0.213,	RCNNL1Loss=0.0644,	
INFO:root:Epoch 8 Batch 900	5.8 smp/sec	RPNLogLoss=0.0415,	RPNL1Loss=0.00816,	RCNNLogLoss=0.193,	RCNNL1Loss=0.0638,	
INFO:root:Epoch 8 Batch 1000	6.0 smp/sec	RPNLogLoss=0.0288,	RPNL1Loss=0.00653,	RCNNLogLoss=0.205,	RCNNL1Loss=0.0655,	
INFO:root:Epoch 8 Batch 1100	5.9 smp/sec	RPNLogLoss=0.0429,	RPNL1Loss=0.0109,	RCNNLogLoss=0.225,	RCNNL1Loss=0.0633,	
INFO:root:Epoch 8 Batch 1200	6.0 smp/sec	RPNLogLoss=0.0307,	RPNL1Loss=0.00615,	RCNNLogLoss=0.204,	RCNNL1Loss=0.0663,	
INFO:root:Epoch 8 Batch 1300	6.0 smp/sec	RPNLogLoss=0.0344,	RPNL1Loss=0.0102,	RCNNLogLoss=0.219,	RCNNL1Loss=0.069,	
INFO:root:Epoch 8 Batch 1400	5.9 smp/sec	RPNLogLoss=0.0266,	RPNL1Loss=0.00559,	RCNNLogLoss=0.182,	RCNNL1Loss=0.0652,	
INFO:root:Epoch 8 Batch 1500	5.9 smp/sec	RPNLogLoss=0.0432,	RPNL1Loss=0.01,	RCNNLogLoss=0.227,	RCNNL1Loss=0.0763,	
INFO:root:Epoch 8 Batch 1600	5.9 smp/sec	RPNLogLoss=0.0325,	RPNL1Loss=0.00692,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0665,	
INFO:root:Epoch 8 Batch 1700	5.8 smp/sec	RPNLogLoss=0.0364,	RPNL1Loss=0.0117,	RCNNLogLoss=0.235,	RCNNL1Loss=0.0728,	
INFO:root:Epoch 8 Batch 1800	6.1 smp/sec	RPNLogLoss=0.0453,	RPNL1Loss=0.00991,	RCNNLogLoss=0.2,	RCNNL1Loss=0.0616,	
INFO:root:Epoch 8 Batch 1900	6.0 smp/sec	RPNLogLoss=0.0473,	RPNL1Loss=0.0121,	RCNNLogLoss=0.239,	RCNNL1Loss=0.0636,	
INFO:root:Epoch 8 Batch 2000	6.1 smp/sec	RPNLogLoss=0.0402,	RPNL1Loss=0.00823,	RCNNLogLoss=0.231,	RCNNL1Loss=0.0575,	
INFO:root:Epoch 8 Batch 2100	5.7 smp/sec	RPNLogLoss=0.0309,	RPNL1Loss=0.0067,	RCNNLogLoss=0.215,	RCNNL1Loss=0.0605,	
INFO:root:Epoch 8 Batch 2200	6.0 smp/sec	RPNLogLoss=0.0412,	RPNL1Loss=0.00883,	RCNNLogLoss=0.217,	RCNNL1Loss=0.0685,	
INFO:root:Epoch 8 Batch 2300	6.0 smp/sec	RPNLogLoss=0.0372,	RPNL1Loss=0.00786,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0627,	
INFO:root:Epoch 8 Batch 2400	5.9 smp/sec	RPNLogLoss=0.0349,	RPNL1Loss=0.00691,	RCNNLogLoss=0.226,	RCNNL1Loss=0.0702,	
INFO:root:Epoch 8 Batch 2500	6.1 smp/sec	RPNLogLoss=0.0362,	RPNL1Loss=0.00899,	RCNNLogLoss=0.21,	RCNNL1Loss=0.062,	
INFO:root:Epoch 8 Batch 2600	6.1 smp/sec	RPNLogLoss=0.0401,	RPNL1Loss=0.00741,	RCNNLogLoss=0.213,	RCNNL1Loss=0.0682,	
INFO:root:Epoch 8 Batch 2700	6.1 smp/sec	RPNLogLoss=0.0317,	RPNL1Loss=0.00983,	RCNNLogLoss=0.194,	RCNNL1Loss=0.063,	
INFO:root:Epoch 8 Batch 2800	6.0 smp/sec	RPNLogLoss=0.0332,	RPNL1Loss=0.00986,	RCNNLogLoss=0.209,	RCNNL1Loss=0.0655,	
INFO:root:Epoch 8 Batch 2900	6.0 smp/sec	RPNLogLoss=0.0425,	RPNL1Loss=0.0139,	RCNNLogLoss=0.21,	RCNNL1Loss=0.0672,	
INFO:root:Epoch 8 Batch 3000	6.0 smp/sec	RPNLogLoss=0.0346,	RPNL1Loss=0.00805,	RCNNLogLoss=0.214,	RCNNL1Loss=0.0567,	
INFO:root:Epoch 8 Batch 3100	6.0 smp/sec	RPNLogLoss=0.0442,	RPNL1Loss=0.0116,	RCNNLogLoss=0.208,	RCNNL1Loss=0.0668,	
INFO:root:Epoch 8 Batch 3200	5.9 smp/sec	RPNLogLoss=0.0501,	RPNL1Loss=0.00984,	RCNNLogLoss=0.242,	RCNNL1Loss=0.0647,	
INFO:root:Epoch 8 Batch 3300	6.0 smp/sec	RPNLogLoss=0.0505,	RPNL1Loss=0.0126,	RCNNLogLoss=0.239,	RCNNL1Loss=0.0666,	
INFO:root:Epoch[8] Train-RPNLogLoss=0.027209
INFO:root:Epoch[8] Train-RPNL1Loss=0.007353
INFO:root:Epoch[8] Train-RCNNLogLoss=0.182421
INFO:root:Epoch[8] Train-RCNNL1Loss=0.065091
INFO:root:Epoch[8] Time cost=570.500
INFO:root:Saved checkpoint to "model/3DCE 1 image 3 slice-0009.params"
INFO:root:Validating ...
INFO:root:DeepLesion_val num_images 4793
INFO:root:DeepLesion_val gt roidb loaded from /home/pulido/CADLab/lesion_detector_3DCE/images/cache/DeepLesion_val_gt_roidb.pkl
INFO:root:noisy boxes filtered, images: 4793 -> 4791, bboxes: 4889 -> 4887
INFO:root:Loading images with 4 threads.
INFO:root:loading parameters from model/3DCE 1 image 3 slice-0009.params
INFO:root:im_detect: 0/4791 data 0.112s im_detect 0.130s misc 0.006s
INFO:root:im_detect: 200/4791 data 0.015s im_detect 0.092s misc 0.006s
INFO:root:im_detect: 400/4791 data 0.015s im_detect 0.091s misc 0.006s
600 800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400 3600 3800 4000 4200 4400 4600
Sensitivity @ [0.5, 1, 2, 4, 8, 16] average FPs per image: [0.43462247 0.54368733 0.64518109 0.73930837 0.80110497 0.84489462]
=============================>PR<============================
precision:
[0.4699635  0.35674006 0.24758539 0.15862493 0.09267808 0.05111097]
recall:
[0.43462247 0.54368733 0.64518109 0.73930837 0.80110497 0.84489462]
f-measure:
[0.45160262 0.43080665 0.35784814 0.2612059  0.16613622 0.09639089]
=============================>PR<============================
Iter 1: 0.3769
Iter 2: 0.5824
Iter 3: 0.6272
Iter 4: 0.6626
Iter 5: 0.7258
Iter 6: 0.7289
Iter 7: 0.7356
Iter 8: 0.7336
Iter 9: 0.7393
model/3DCE 1 image 3 slice-0007.params deleted to keep only the best model
INFO:root:Validate callback: 0.739308
INFO:root:Returned Validation=0.065091
INFO:root:Retraining data=0.065091
INFO:root:Loading images with 4 threads.
INFO:root:Redoing training to meet criteria = 9
INFO:root:sample boxes filtered, images: 22478 -> 3284, bboxes: 22901 -> 22901
INFO:root:Loading images with 4 threads.
OMP: Error #34: System unable to allocate necessary resources for OMP thread:
OMP: System error #11: Resource temporarily unavailable
OMP: Hint Try decreasing the value of OMP_NUM_THREADS.
./train.sh: line 16: 13418 Aborted                 (core dumped) python $DIR/rcnn/tools/train.py
